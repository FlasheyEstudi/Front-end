<!-- src/app/Child/solicitud-beca/solicitud-beca.component.html -->
<div class="dashboard-container">
  <!-- Header -->
  <div class="header">
    <h1 class="title">Gestión de Solicitud</h1>
    <p class="subtitle">Revisa y procesa las solicitudes de becas</p>
  </div>

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <div class="kpi-card blue">
      <div class="kpi-content">
        <div class="kpi-number">{{ totalSolicitudes }}</div>
        <div class="kpi-label">Total</div>
      </div>
    </div>
    <div class="kpi-card green">
      <div class="kpi-content">
        <div class="kpi-number">{{ aprobadas }}</div>
        <div class="kpi-label">Aprobadas</div>
      </div>
    </div>
    <div class="kpi-card blue">
      <div class="kpi-content">
        <div class="kpi-number">{{ enRevision }}</div>
        <div class="kpi-label">En Revisión</div>
      </div>
    </div>
    <div class="kpi-card red">
      <div class="kpi-content">
        <div class="kpi-number">{{ pendientes }}</div>
        <div class="kpi-label">Pendientes</div>
      </div>
    </div>
    <div class="kpi-card gray">
      <div class="kpi-content">
        <div class="kpi-number">{{ rechazadas }}</div>
        <div class="kpi-label">Rechazadas</div>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filters">
    <div class="search-bar">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Buscar solicitudes..." [(ngModel)]="searchTerm" (input)="onSearch()">
    </div>
    <select [(ngModel)]="estadoFiltro" (change)="onFilterChange()">
      <option value="">Todos los estados</option>
      <option value="Aprobado">Aprobado</option>
      <option value="En Proceso">En Proceso</option>
      <option value="Pendiente">Pendiente</option>
      <option value="Rechazado">Rechazado</option>
    </select>
    <select [(ngModel)]="becaFiltro" (change)="onFilterChange()">
      <option value="">Todas las becas</option>
      <option *ngFor="let tipo of tiposBeca" [value]="tipo.Nombre">{{ tipo.Nombre }}</option>
    </select>
    <select [(ngModel)]="periodoFiltro" (change)="onFilterChange()">
      <option value="">Todos los periodos</option>
      <option *ngFor="let periodo of periodosAcademicos" [value]="periodo.Nombre">{{ periodo.Nombre }}</option>
    </select>
    <div class="total-count">
      {{ filteredSolicitudes.length }} solicitudes
    </div>
  </div>

  <!-- Tabla de solicitudes -->
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Estudiante</th>
          <th>Tipo de Beca</th>
          <th>Periodo</th>
          <th>Sistema académico</th>
          <th>Fecha</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let solicitud of filteredSolicitudes">
          <td>
            <div class="student-info">
              <div class="avatar">{{ getInitials(solicitud.EstudianteNombre) }}</div>
              <div class="student-name">{{ solicitud.EstudianteNombre }} {{ solicitud.EstudianteApellido }}</div>
              <div class="student-id">{{ solicitud.EstudianteId }}</div> <!-- Reemplazo de Codigo -->
              <div class="student-program">{{ solicitud.PeriodoAnioAcademico || 'N/A' }}</div> <!-- Reemplazo de Programa -->
            </div>
          </td>
          <td>{{ solicitud.TipoBecaNombre }}</td>
          <td>{{ solicitud.PeriodoAcademicoNombre }}</td>
          <td>
            <span class="system-badge">{{ 'N/A' }}</span> <!-- Reemplazo de SistemaAcademico -->
          </td>
          <td>{{ solicitud.FechaSolicitud | date:'yyyy-MM-dd' }}</td>
          <td>
            <div class="status-badge" [class]="getStatusClass(solicitud.Estadonombre)">
              <i *ngIf="solicitud.Estadonombre === 'Aprobado'" class="fas fa-check-circle"></i>
              <i *ngIf="solicitud.Estadonombre === 'En Proceso'" class="fas fa-clock"></i>
              <i *ngIf="solicitud.Estadonombre === 'Pendiente'" class="fas fa-exclamation-triangle"></i>
              <i *ngIf="solicitud.Estadonombre === 'Rechazado'" class="fas fa-times-circle"></i>
              {{ solicitud.Estadonombre }}
            </div>
          </td>
          <td>
            <button class="btn-revisar" (click)="verSolicitud(solicitud.Id)">
              <i class="fas fa-eye"></i> Revisar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>