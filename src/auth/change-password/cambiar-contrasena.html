<div class="container">
  <h2>Cambiar Contraseña</h2>
  <form [formGroup]="form" (ngSubmit)="submit()" class="login-form">
    <div class="form-group">
      <label for="currentPassword">Contraseña actual</label>
      <div class="input-wrapper">
        <i class="fas fa-lock"></i>
        <input
          type="password"
          id="currentPassword"
          formControlName="currentPassword"
          class="form-input"
          placeholder="Ingresa tu contraseña actual"
        />
      </div>
      <div *ngIf="form.get('currentPassword')?.hasError('required') && form.get('currentPassword')?.touched" class="validation-error">
        La contraseña actual es obligatoria.
      </div>
    </div>

    <div class="form-group">
      <label for="newPassword">Nueva contraseña</label>
      <div class="input-wrapper">
        <i class="fas fa-lock"></i>
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          class="form-input"
          placeholder="Ingresa tu nueva contraseña"
        />
      </div>
      <div *ngIf="form.get('newPassword')?.hasError('required') && form.get('newPassword')?.touched" class="validation-error">
        La nueva contraseña es obligatoria.
      </div>
      <div *ngIf="form.get('newPassword')?.hasError('minlength') && form.get('newPassword')?.touched" class="validation-error">
        La nueva contraseña debe tener al menos 6 caracteres.
      </div>
    </div>

    <div class="form-group">
      <label for="confirmNewPassword">Confirmar nueva contraseña</label>
      <div class="input-wrapper">
        <i class="fas fa-lock"></i>
        <input
          type="password"
          id="confirmNewPassword"
          formControlName="confirmNewPassword"
          class="form-input"
          placeholder="Confirma tu nueva contraseña"
        />
      </div>
      <div *ngIf="form.hasError('notMatching') && form.get('confirmNewPassword')?.touched" class="validation-error">
        Las contraseñas no coinciden.
      </div>
    </div>

    <div *ngIf="error" class="validation-error">{{ error }}</div>
    <div *ngIf="success" class="success">{{ success }}</div>

    <button type="submit" [disabled]="form.invalid || loading" class="btn-login">
      <i class="fas fa-sign-in-alt"></i>
      {{ loading ? 'Cargando...' : 'Cambiar Contraseña' }}
    </button>
  </form>
</div>