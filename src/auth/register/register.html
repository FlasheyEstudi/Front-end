<!-- src/app/auth/register/register.component.html -->
<div class="register-container">
  <div class="register-card">
    <div class="logo-container">
      <div class="logo">
        <!-- Asegúrate de tener FontAwesome incluido en tu proyecto -->
        <i class="fas fa-graduation-cap"></i> 
      </div>
    </div>
    <h2 class="register-title">Registro de Usuario</h2>
    <p class="subtitle">Complete el formulario para crear una nueva cuenta</p>

    <!-- Formulario de Registro -->
    <form class="register-form" (submit)="onSubmit($event)" *ngIf="!showModal">
      
      <div class="form-group">
        <label for="nombre">Nombre:</label>
        <div class="input-wrapper">
          <i class="fas fa-user"></i>
          <input type="text" id="nombre" [(ngModel)]="Nombre" name="Nombre" placeholder="Ingrese su nombre" required>
        </div>
      </div>

      <div class="form-group">
        <label for="apellidos">Apellidos:</label>
        <div class="input-wrapper">
          <i class="fas fa-user-tag"></i>
          <input type="text" id="apellidos" [(ngModel)]="Apellidos" name="Apellidos" placeholder="Ingrese sus apellidos" required>
        </div>
      </div>

      <div class="form-group">
        <label for="correo">Correo Electrónico:</label>
        <div class="input-wrapper">
          <i class="fas fa-envelope"></i>
          <input type="email" id="correo" [(ngModel)]="Correo" name="Correo" placeholder="ejemplo@correo.com" required>
        </div>
      </div>

      <!-- ✅ Campo agregado para Edad -->
      <div class="form-group">
        <label for="edad">Edad:</label>
        <div class="input-wrapper">
          <i class="fas fa-birthday-cake"></i>
          <input type="number" id="edad" [(ngModel)]="Edad" name="Edad" placeholder="Ingrese su edad" min="1" required>
        </div>
      </div>

      <div class="form-group">
        <label for="role">Rol:</label>
        <div class="input-wrapper">
          <i class="fas fa-user-shield"></i>
          <select id="role" [(ngModel)]="Role" name="Role">
            <option value="estudiante">Estudiante</option>
            <option value="admin">Administrador</option>
          </select>
        </div>
      </div>

      <!-- Mensaje de error -->
      <div class="error-message" *ngIf="error">{{ error }}</div>

      <!-- Botón de submit -->
      <button type="submit" class="btn-register" [disabled]="loading">
        <i class="fas fa-user-plus"></i> <!-- Icono opcional -->
        {{ loading ? 'Registrando...' : 'Registrar' }}
      </button>
    </form>

    <!-- Enlace a login -->
    <p class="login-link">
      ¿Ya tienes una cuenta? <a routerLink="/login">Inicia sesión aquí</a>
    </p>

    <!-- Modal de Credenciales Generadas -->
    <div class="modal-overlay" *ngIf="showModal" (click)="closeCredentialsModal()">
      <!-- Asegúrate de que las clases CSS (.modal-registro, etc.) coincidan con tu archivo register.css -->
      <div class="modal-registro" (click)="$event.stopPropagation()"> 
        <div class="modal-header">
          <h3>¡Registro Exitoso!</h3>
          <!-- Botón de cerrar opcional en la esquina -->
          <button class="close-button" (click)="closeCredentialsModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p>Se ha registrado correctamente. Estas son sus credenciales:</p>

          <div class="credential-item"> <!-- Clase del CSS -->
            <label>Usuario:</label>
            <div class="credential-value"> <!-- Clase del CSS -->
              <span>{{ credentials.username }}</span>
              <button type="button" (click)="copyToClipboard(credentials.username)" class="copy-button"> <!-- Clase del CSS -->
                Copiar
              </button>
            </div>
          </div>

          <div class="credential-item">
            <label>Correo Electrónico:</label>
            <div class="credential-value">
              <span>{{ credentials.email }}</span>
              <button type="button" (click)="copyToClipboard(credentials.email)" class="copy-button">
                Copiar
              </button>
            </div>
          </div>

          <div class="credential-item">
            <label>Contraseña:</label>
            <div class="credential-value">
              <span>{{ credentials.password }}</span>
              <button type="button" (click)="copyToClipboard(credentials.password)" class="copy-button">
                Copiar
              </button>
            </div>
          </div>

          <div class="important-note"> <!-- Clase del CSS -->
            <i class="fas fa-exclamation-triangle"></i>
            <p>⚠️ Guarde estas credenciales en un lugar seguro. Necesitará el correo y la contraseña para iniciar sesión.</p>
          </div>
        </div>
        <div class="modal-footer"> <!-- Clase del CSS -->
          <button type="button" (click)="closeCredentialsModal()" class="btn-primary"> <!-- Clase del CSS -->
            Aceptar e Ir al Login
          </button>
        </div>
      </div>
    </div>
  </div>
</div>